/*!
 * @license twgl.js 4.8.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.twgl=t():e.twgl=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=5120,o=5121,u=5122,i=5123,c=5124,f=5125,l=5126,a={};{const e=a;e[r]=Int8Array,e[o]=Uint8Array,e[u]=Int16Array,e[i]=Uint16Array,e[c]=Int32Array,e[f]=Uint32Array,e[l]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}function s(e){if(e instanceof Int8Array)return r;if(e instanceof Uint8Array)return o;if(e instanceof Uint8ClampedArray)return o;if(e instanceof Int16Array)return u;if(e instanceof Uint16Array)return i;if(e instanceof Int32Array)return c;if(e instanceof Uint32Array)return f;if(e instanceof Float32Array)return l;throw"unsupported typed array type"}function y(e){if(e===Int8Array)return r;if(e===Uint8Array)return o;if(e===Uint8ClampedArray)return o;if(e===Int16Array)return u;if(e===Uint16Array)return i;if(e===Int32Array)return c;if(e===Uint32Array)return f;if(e===Float32Array)return l;throw"unsupported typed array type"}function m(e){const t=a[e];if(!t)throw"unknown gl type";return t}const b="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function p(e,t){Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n])})}const d="undefined"!=typeof console&&console.error&&"function"==typeof console.error?console.error.bind(console):function(){},F="undefined"!=typeof console&&console.warn&&"function"==typeof console.warn?console.warn.bind(console):function(){};let x,A,E,T,_;function P(e,t){return A||(A=e.createRenderbuffer()),t instanceof A.constructor}function g(e,t){return E||(E=e.createShader(e.VERTEX_SHADER)),t instanceof E.constructor}function R(e,t){return T||(T=e.createTexture()),t instanceof T.constructor}const h={attribPrefix:""};function w(e){h.attribPrefix=e}function z(e){p(e,h)}function v(e,t,n,r,o){e.bindBuffer(t,n),e.bufferData(t,r,o||e.STATIC_DRAW)}function U(e,t,n,r){if(function(e,t){return x||(x=e.createBuffer()),t instanceof x.constructor}(e,t))return t;n=n||e.ARRAY_BUFFER;const o=e.createBuffer();return v(e,n,o,t,r),o}function S(e){return"indices"===e}function C(e){return e.length?e:e.data}const I=/coord|texture/i,B=/color|colour/i;function O(e,t){let n;if(t%(n=I.test(e)?2:B.test(e)?4:3)>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+n+" but "+t+" values is not evenly divisible by "+n+". You should specify it.";return n}function j(e,t){return e.numComponents||e.size||O(t,C(e).length)}function k(e,t){if(b(e))return e;if(b(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type;return n||(n=S(t)?Uint16Array:Float32Array),new n(e.data)}function L(e,t){const n={};return Object.keys(t).forEach(function(r){if(!S(r)){const u=t[r],i=u.attrib||u.name||u.attribName||h.attribPrefix+r;if(u.value){if(!Array.isArray(u.value)&&!b(u.value))throw new Error("array.value is not array or typedarray");n[i]={value:u.value}}else{let t,c,f,l;if(u.buffer&&u.buffer instanceof WebGLBuffer)t=u.buffer,l=u.numComponents||u.size,c=u.type,f=u.normalize;else if("number"==typeof u||"number"==typeof u.data){const n=u.data||u,i=u.type||Float32Array,a=n*i.BYTES_PER_ELEMENT;c=y(i),f=void 0!==u.normalize?u.normalize:(o=i)===Int8Array||o===Uint8Array,l=u.numComponents||u.size||O(r,n),t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,a,u.drawType||e.STATIC_DRAW)}else{const n=k(u,r);t=U(e,n,void 0,u.drawType),c=s(n),f=void 0!==u.normalize?u.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(n),l=j(u,r)}n[i]={buffer:t,numComponents:l,type:c,normalize:f,stride:u.stride||0,offset:u.offset||0,divisor:void 0===u.divisor?void 0:u.divisor,drawType:u.drawType}}}var o}),e.bindBuffer(e.ARRAY_BUFFER,null),n}function G(e,t,n,r){n=k(n),void 0!==r?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,r,n)):v(e,e.ARRAY_BUFFER,t.buffer,n,t.drawType)}const M=["position","positions","a_position"];function D(e,t,n){const r=L(e,t),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const u=t.indices;if(u){const t=k(u,"indices");o.indices=U(e,t,e.ELEMENT_ARRAY_BUFFER),o.numElements=t.length,o.elementType=s(t)}else o.numElements||(o.numElements=function(e,t){let n,r;for(r=0;r<M.length&&!((n=M[r])in t)&&!((n=h.attribPrefix+n)in t);++r);r===M.length&&(n=Object.keys(t)[0]);const o=t[n];e.bindBuffer(e.ARRAY_BUFFER,o.buffer);const u=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);const i=u/function(e,t){return t===e.BYTE?1:t===e.UNSIGNED_BYTE?1:t===e.SHORT?2:t===e.UNSIGNED_SHORT?2:t===e.INT?4:t===e.UNSIGNED_INT?4:t===e.FLOAT?4:0}(e,o.type),c=o.numComponents||o.size,f=i/c;if(f%1!=0)throw"numComponents "+c+" not correct for length "+length;return f}(e,o.attribs));return o}function X(e,t,n){const r="indices"===n?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return U(e,k(t,n),r)}function W(e,t){const n={};return Object.keys(t).forEach(function(r){n[r]=X(e,t[r],r)}),t.indices?(n.numElements=t.indices.length,n.elementType=s(k(t.indices))):n.numElements=function(e){let t,n;for(n=0;n<M.length&&!((t=M[n])in e);++n);n===M.length&&(t=Object.keys(e)[0]);const r=e[t],o=C(r).length,u=j(r,t);if(o%u>0)throw"numComponents "+u+" not correct for length "+o;return o/u}(t),n}function N(e){return!!e.texStorage2D}function V(e){return!e.texStorage2D}const H=function(){const e={},t={};return function(n,r){return function(n){const r=n.constructor.name;if(!e[r]){for(const e in n)if("number"==typeof n[e]){const r=t[n[e]];t[n[e]]=r?`${r} | ${e}`:e}e[r]=!0}}(n),t[r]||"0x"+r.toString(16)}}(),q={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Y=b,$="undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null,K=6407,Z=33319,J={};{const e=J;e[6406]={u:1},e[6409]={u:1},e[6410]={u:2},e[K]={u:3},e[6408]={u:4},e[6403]={u:1},e[36244]={u:1},e[Z]={u:2},e[33320]={u:2},e[K]={u:3},e[36248]={u:3},e[6408]={u:4},e[36249]={u:4},e[6402]={u:1},e[34041]={u:2}}const Q={};{const e=Q;e[6406]={F:6406,A:!0,T:!0,_:[1,2,2,4],type:[5121,5131,36193,5126]},e[6409]={F:6409,A:!0,T:!0,_:[1,2,2,4],type:[5121,5131,36193,5126]},e[6410]={F:6410,A:!0,T:!0,_:[2,4,4,8],type:[5121,5131,36193,5126]},e[K]={F:K,A:!0,T:!0,_:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},e[6408]={F:6408,A:!0,T:!0,_:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},e[33321]={F:6403,A:!0,T:!0,_:[1],type:[5121]},e[36756]={F:6403,A:!1,T:!0,_:[1],type:[5120]},e[33325]={F:6403,A:!1,T:!0,_:[4,2],type:[5126,5131]},e[33326]={F:6403,A:!1,T:!1,_:[4],type:[5126]},e[33330]={F:36244,A:!0,T:!1,_:[1],type:[5121]},e[33329]={F:36244,A:!0,T:!1,_:[1],type:[5120]},e[33332]={F:36244,A:!0,T:!1,_:[2],type:[5123]},e[33331]={F:36244,A:!0,T:!1,_:[2],type:[5122]},e[33334]={F:36244,A:!0,T:!1,_:[4],type:[5125]},e[33333]={F:36244,A:!0,T:!1,_:[4],type:[5124]},e[33323]={F:Z,A:!0,T:!0,_:[2],type:[5121]},e[36757]={F:Z,A:!1,T:!0,_:[2],type:[5120]},e[33327]={F:Z,A:!1,T:!0,_:[8,4],type:[5126,5131]},e[33328]={F:Z,A:!1,T:!1,_:[8],type:[5126]},e[33336]={F:33320,A:!0,T:!1,_:[2],type:[5121]},e[33335]={F:33320,A:!0,T:!1,_:[2],type:[5120]},e[33338]={F:33320,A:!0,T:!1,_:[4],type:[5123]},e[33337]={F:33320,A:!0,T:!1,_:[4],type:[5122]},e[33340]={F:33320,A:!0,T:!1,_:[8],type:[5125]},e[33339]={F:33320,A:!0,T:!1,_:[8],type:[5124]},e[32849]={F:K,A:!0,T:!0,_:[3],type:[5121]},e[35905]={F:K,A:!1,T:!0,_:[3],type:[5121]},e[36194]={F:K,A:!0,T:!0,_:[3,2],type:[5121,33635]},e[36758]={F:K,A:!1,T:!0,_:[3],type:[5120]},e[35898]={F:K,A:!1,T:!0,_:[12,6,4],type:[5126,5131,35899]},e[35901]={F:K,A:!1,T:!0,_:[12,6,4],type:[5126,5131,35902]},e[34843]={F:K,A:!1,T:!0,_:[12,6],type:[5126,5131]},e[34837]={F:K,A:!1,T:!1,_:[12],type:[5126]},e[36221]={F:36248,A:!1,T:!1,_:[3],type:[5121]},e[36239]={F:36248,A:!1,T:!1,_:[3],type:[5120]},e[36215]={F:36248,A:!1,T:!1,_:[6],type:[5123]},e[36233]={F:36248,A:!1,T:!1,_:[6],type:[5122]},e[36209]={F:36248,A:!1,T:!1,_:[12],type:[5125]},e[36227]={F:36248,A:!1,T:!1,_:[12],type:[5124]},e[32856]={F:6408,A:!0,T:!0,_:[4],type:[5121]},e[35907]={F:6408,A:!0,T:!0,_:[4],type:[5121]},e[36759]={F:6408,A:!1,T:!0,_:[4],type:[5120]},e[32855]={F:6408,A:!0,T:!0,_:[4,2,4],type:[5121,32820,33640]},e[32854]={F:6408,A:!0,T:!0,_:[4,2],type:[5121,32819]},e[32857]={F:6408,A:!0,T:!0,_:[4],type:[33640]},e[34842]={F:6408,A:!1,T:!0,_:[16,8],type:[5126,5131]},e[34836]={F:6408,A:!1,T:!1,_:[16],type:[5126]},e[36220]={F:36249,A:!0,T:!1,_:[4],type:[5121]},e[36238]={F:36249,A:!0,T:!1,_:[4],type:[5120]},e[36975]={F:36249,A:!0,T:!1,_:[4],type:[33640]},e[36214]={F:36249,A:!0,T:!1,_:[8],type:[5123]},e[36232]={F:36249,A:!0,T:!1,_:[8],type:[5122]},e[36226]={F:36249,A:!0,T:!1,_:[16],type:[5124]},e[36208]={F:36249,A:!0,T:!1,_:[16],type:[5125]},e[33189]={F:6402,A:!0,T:!1,_:[2,4],type:[5123,5125]},e[33190]={F:6402,A:!0,T:!1,_:[4],type:[5125]},e[36012]={F:6402,A:!0,T:!1,_:[4],type:[5126]},e[35056]={F:34041,A:!0,T:!1,_:[4],type:[34042]},e[36013]={F:34041,A:!0,T:!1,_:[4],type:[36269]},Object.keys(e).forEach(function(t){const n=e[t];n.bytesPerElementMap={},n._.forEach(function(e,t){const r=n.type[t];n.bytesPerElementMap[r]=e})})}function ee(e,t){const n=Q[e];if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[t];if(void 0===r)throw"unknown internal format";return r}function te(e){const t=Q[e];if(!t)throw"unknown internal format";return{format:t.F,type:t.type[0]}}function ne(e){return 0==(e&e-1)}function re(e,t,n,r){if(!N(e))return ne(t)&&ne(n);const o=Q[r];if(!o)throw"unknown internal format";return o.A&&o.T}function oe(e){const t=Q[e];if(!t)throw"unknown internal format";return t.T}function ue(e){const t=J[e];if(!t)throw"unknown format: "+e;return t.u}function ie(e,t,n){return Y(t)?s(t):n||e.UNSIGNED_BYTE}function ce(e,t,n,r,o){if(o%1!=0)throw"can't guess dimensions";if(n||r){if(r){if(!n&&(n=o/r)%1)throw"can't guess dimensions"}else if((r=o/n)%1)throw"can't guess dimensions"}else{const u=Math.sqrt(o/(t===e.TEXTURE_CUBE_MAP?6:1));u%1==0?(n=u,r=u):(n=o,r=1)}return{width:n,height:r}}function fe(e){q.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function le(e){p(e,q),e.textureColor&&fe(e.textureColor)}const ae={};function se(e,t){void 0!==t.colorspaceConversion&&(ae.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(ae.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(ae.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function ye(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,ae.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,ae.flipY)}function me(e){ae.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),N(e)&&(ae.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),ae.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),ae.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),ae.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),ae.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function be(e){e.pixelStorei(e.UNPACK_ALIGNMENT,ae.unpackAlignment),N(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,ae.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,ae.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,ae.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,ae.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,ae.unpackSkipImages))}function pe(e,t,n,r){r.minMag&&(n.call(e,t,e.TEXTURE_MIN_FILTER,r.minMag),n.call(e,t,e.TEXTURE_MAG_FILTER,r.minMag)),r.min&&n.call(e,t,e.TEXTURE_MIN_FILTER,r.min),r.mag&&n.call(e,t,e.TEXTURE_MAG_FILTER,r.mag),r.wrap&&(n.call(e,t,e.TEXTURE_WRAP_S,r.wrap),n.call(e,t,e.TEXTURE_WRAP_T,r.wrap),(t===e.TEXTURE_3D||function(e,t){if(!_){if(!e.createSampler)return!1;_=e.createSampler()}return t instanceof _.constructor}(e,t))&&n.call(e,t,e.TEXTURE_WRAP_R,r.wrap)),r.wrapR&&n.call(e,t,e.TEXTURE_WRAP_R,r.wrapR),r.wrapS&&n.call(e,t,e.TEXTURE_WRAP_S,r.wrapS),r.wrapT&&n.call(e,t,e.TEXTURE_WRAP_T,r.wrapT),r.minLod&&n.call(e,t,e.TEXTURE_MIN_LOD,r.minLod),r.maxLod&&n.call(e,t,e.TEXTURE_MAX_LOD,r.maxLod),r.baseLevel&&n.call(e,t,e.TEXTURE_BASE_LEVEL,r.baseLevel),r.maxLevel&&n.call(e,t,e.TEXTURE_MAX_LEVEL,r.maxLevel)}function de(e,t,n){const r=n.target||e.TEXTURE_2D;e.bindTexture(r,t),pe(e,r,e.texParameteri,n)}function Fe(e,t,n){pe(e,t,e.samplerParameteri,n)}function xe(e,t){const n=e.createSampler();return Fe(e,n,t),n}function Ae(e,t){const n={};return Object.keys(t).forEach(function(r){n[r]=xe(e,t[r])}),n}function Ee(e,t,n,r,o,u,i){n=n||q.textureOptions,u=u||e.RGBA,i=i||e.UNSIGNED_BYTE;const c=n.target||e.TEXTURE_2D;if(r=r||n.width,o=o||n.height,e.bindTexture(c,t),re(e,r,o,u))e.generateMipmap(c);else{const t=oe(u)?e.LINEAR:e.NEAREST;e.texParameteri(c,e.TEXTURE_MIN_FILTER,t),e.texParameteri(c,e.TEXTURE_MAG_FILTER,t),e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function Te(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function _e(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function Pe(e,t){const n=_e(e,t).map(function(e,t){return{face:e,ndx:t}});return n.sort(function(e,t){return e.face-t.face}),n}function ge(e,t,n,r){const o=(r=r||q.textureOptions).target||e.TEXTURE_2D,u=r.level||0;let i=n.width,c=n.height;const f=r.internalFormat||r.format||e.RGBA,l=te(f),a=r.format||l.format,s=r.type||l.type;if(se(e,r),e.bindTexture(o,t),o===e.TEXTURE_CUBE_MAP){const l=n.width,y=n.height;let m,b;if(l/6===y)m=y,b=[0,0,1,0,2,0,3,0,4,0,5,0];else if(y/6===l)m=l,b=[0,0,0,1,0,2,0,3,0,4,0,5];else if(l/3==y/2)m=l/3,b=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(l/2!=y/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);m=l/2,b=[0,0,1,0,0,1,1,1,0,2,1,2]}$?($.canvas.width=m,$.canvas.height=m,i=m,c=m,Pe(e,r).forEach(function(t){const r=b[2*t.ndx+0]*m,o=b[2*t.ndx+1]*m;$.drawImage(n,r,o,m,m,0,0,m,m),e.texImage2D(t.face,u,f,a,s,$.canvas)}),$.canvas.width=1,$.canvas.height=1):"undefined"!=typeof createImageBitmap&&(i=m,c=m,Pe(e,r).forEach(function(l){const y=b[2*l.ndx+0]*m,p=b[2*l.ndx+1]*m;e.texImage2D(l.face,u,f,m,m,0,a,s,null),createImageBitmap(n,y,p,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(n){se(e,r),e.bindTexture(o,t),e.texImage2D(l.face,u,f,a,s,n),ye(e,r),Te(r)&&Ee(e,t,r,i,c,f,s)})}))}else if(o===e.TEXTURE_3D||o===e.TEXTURE_2D_ARRAY){const t=Math.min(n.width,n.height),r=Math.max(n.width,n.height),i=r/t;if(i%1!=0)throw"can not compute 3D dimensions of element";const c=n.width===r?1:0,l=n.height===r?1:0;me(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,n.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(o,u,f,t,t,t,0,a,s,null);for(let r=0;r<i;++r){const i=r*t*c,f=r*t*l;e.pixelStorei(e.UNPACK_SKIP_PIXELS,i),e.pixelStorei(e.UNPACK_SKIP_ROWS,f),e.texSubImage3D(o,u,0,0,r,t,t,1,a,s,n)}be(e)}else e.texImage2D(o,u,f,a,s,n);ye(e,r),Te(r)&&Ee(e,t,r,i,c,f,s),de(e,t,r)}function Re(){}const he=new URL(location.href).origin;function we(e,t){return void 0!==t||function(e){return new URL(e,location.href)===he}(e)?t:"anonymous"}function ze(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function ve(e,t,n){return ze(e)?(setTimeout(function(){n(null,e)}),e):function(e,t,n){let r;if(n=n||Re,t=void 0!==t?t:q.crossOrigin,t=we(e,t),"undefined"!=typeof Image){r=new Image,void 0!==t&&(r.crossOrigin=t);const o=function(){r.removeEventListener("error",u),r.removeEventListener("load",i),r=null},u=function(){const t="couldn't load image: "+e;d(t),n(t,r),o()},i=function(){n(null,r),o()};return r.addEventListener("error",u),r.addEventListener("load",i),r.src=e,r}if("undefined"!=typeof ImageBitmap){let o,u;const i=function(){n(o,u)},c={};t&&(c.mode="cors"),fetch(e,c).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){u=e,setTimeout(i)}).catch(function(e){o=e,setTimeout(i)}),r=null}return r}(e,t,n)}function Ue(e,t,n){const r=(n=n||q.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(r,t),!1===n.color)return;const o=function(e){return e=e||q.textureColor,Y(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(n.color);if(r===e.TEXTURE_CUBE_MAP)for(let t=0;t<6;++t)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);else r===e.TEXTURE_3D||r===e.TEXTURE_2D_ARRAY?e.texImage3D(r,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o)}function Se(e,t,n,r){return r=r||Re,n=n||q.textureOptions,Ue(e,t,n),ve((n=Object.assign({},n)).src,n.crossOrigin,function(o,u){o?r(o,t,u):(ge(e,t,u,n),r(null,t,u))})}function Ce(e,t,n,r){r=r||Re;const o=n.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";const u=n.level||0,i=n.internalFormat||n.format||e.RGBA,c=te(i),f=n.format||c.format,l=n.type||e.UNSIGNED_BYTE,a=n.target||e.TEXTURE_2D;if(a!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";Ue(e,t,n),n=Object.assign({},n);let s=6;const y=[],m=_e(e,n);let b;b=o.map(function(o,c){return ve(o,n.crossOrigin,(p=m[c],function(o,c){--s,o?y.push(o):c.width!==c.height?y.push("cubemap face img is not a square: "+c.src):(se(e,n),e.bindTexture(a,t),5===s?_e(e).forEach(function(t){e.texImage2D(t,u,i,f,l,c)}):e.texImage2D(p,u,i,f,l,c),ye(e,n),Te(n)&&e.generateMipmap(a)),0===s&&r(y.length?y:void 0,t,b)}));var p})}function Ie(e,t,n,r){r=r||Re;const o=n.src,u=n.internalFormat||n.format||e.RGBA,i=te(u),c=n.format||i.format,f=n.type||e.UNSIGNED_BYTE,l=n.target||e.TEXTURE_2D_ARRAY;if(l!==e.TEXTURE_3D&&l!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Ue(e,t,n),n=Object.assign({},n);let a=o.length;const s=[];let y;const m=n.level||0;let b=n.width,p=n.height;const d=o.length;let F=!0;y=o.map(function(o,i){return ve(o,n.crossOrigin,(x=i,function(o,i){if(--a,o)s.push(o);else{if(se(e,n),e.bindTexture(l,t),F){F=!1,b=n.width||i.width,p=n.height||i.height,e.texImage3D(l,m,u,b,p,d,0,c,f,null);for(let t=0;t<d;++t)e.texSubImage3D(l,m,0,0,t,b,p,1,c,f,i)}else{let t=i;i.width===b&&i.height===p||(t=$.canvas,$.canvas.width=b,$.canvas.height=p,$.drawImage(i,0,0,b,p)),e.texSubImage3D(l,m,0,0,x,b,p,1,c,f,t),t===$.canvas&&($.canvas.width=0,$.canvas.height=0)}ye(e,n),Te(n)&&e.generateMipmap(l)}0===a&&r(s.length?s:void 0,t,y)}));var x})}function Be(e,t,n,r){const o=(r=r||q.textureOptions).target||e.TEXTURE_2D;e.bindTexture(o,t);let u=r.width,i=r.height,c=r.depth;const f=r.level||0,l=r.internalFormat||r.format||e.RGBA,a=te(l),s=r.format||a.format,y=r.type||ie(e,n,a.type);if(Y(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const e=m(y);n=new e(n)}const b=ee(l,y),p=n.byteLength/b;if(p%1)throw"length wrong size for format: "+H(e,s);let d;if(o===e.TEXTURE_3D)if(u||i||c)!u||i&&c?!i||u&&c?(d=ce(e,o,u,i,p/c),u=d.width,i=d.height):(d=ce(e,o,u,c,p/i),u=d.width,c=d.height):(d=ce(e,o,i,c,p/u),i=d.width,c=d.height);else{const e=Math.cbrt(p);if(e%1!=0)throw"can't guess cube size of array of numElements: "+p;u=e,i=e,c=e}else d=ce(e,o,u,i,p),u=d.width,i=d.height;if(me(e),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment||1),se(e,r),o===e.TEXTURE_CUBE_MAP){const t=p/6*(b/n.BYTES_PER_ELEMENT);Pe(e,r).forEach(r=>{const o=t*r.ndx,c=n.subarray(o,o+t);e.texImage2D(r.face,f,l,u,i,0,s,y,c)})}else o===e.TEXTURE_3D?e.texImage3D(o,f,l,u,i,c,0,s,y,n):e.texImage2D(o,f,l,u,i,0,s,y,n);return ye(e,r),be(e),{width:u,height:i,depth:c,type:y}}function Oe(e,t,n){const r=n.target||e.TEXTURE_2D;e.bindTexture(r,t);const o=n.level||0,u=n.internalFormat||n.format||e.RGBA,i=te(u),c=n.format||i.format,f=n.type||i.type;if(se(e,n),r===e.TEXTURE_CUBE_MAP)for(let t=0;t<6;++t)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,o,u,n.width,n.height,0,c,f,null);else r===e.TEXTURE_3D?e.texImage3D(r,o,u,n.width,n.height,n.depth,0,c,f,null):e.texImage2D(r,o,u,n.width,n.height,0,c,f,null);ye(e,n)}function je(e,t,n){n=n||Re,t=t||q.textureOptions;const r=e.createTexture(),o=t.target||e.TEXTURE_2D;let u=t.width||1,i=t.height||1;const c=t.internalFormat||e.RGBA,f=te(c);let l=t.type||f.type;e.bindTexture(o,r),o===e.TEXTURE_CUBE_MAP&&(e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));let a=t.src;if(a)if("function"==typeof a&&(a=a(e,t)),"string"==typeof a)Se(e,r,t,n);else if(Y(a)||Array.isArray(a)&&("number"==typeof a[0]||Array.isArray(a[0])||Y(a[0]))){const n=Be(e,r,a,t);u=n.width,i=n.height,l=n.type}else if(Array.isArray(a)&&("string"==typeof a[0]||ze(a[0])))o===e.TEXTURE_CUBE_MAP?Ce(e,r,t,n):Ie(e,r,t,n);else{if(!ze(a))throw"unsupported src type";ge(e,r,a,t),u=a.width,i=a.height}else Oe(e,r,t);return Te(t)&&Ee(e,r,t,u,i,c,l),de(e,r,t),r}function ke(e,t,n,r,o){r=r||n.width,o=o||n.height;const u=n.target||e.TEXTURE_2D;e.bindTexture(u,t);const i=n.level||0,c=n.internalFormat||n.format||e.RGBA,f=te(c),l=n.format||f.format;let a;const s=n.src;if(a=s&&(Y(s)||Array.isArray(s)&&"number"==typeof s[0])?n.type||ie(e,s,f.type):n.type||f.type,u===e.TEXTURE_CUBE_MAP)for(let t=0;t<6;++t)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,c,r,o,0,l,a,null);else e.texImage2D(u,i,c,r,o,0,l,a,null)}function Le(e,t,n){n=n||Re;let r=0;const o=[],u={},i={};function c(){0===r&&setTimeout(function(){n(o.length?o:void 0,u,i)},0)}return Object.keys(t).forEach(function(n){const f=t[n];let l;var a;("string"==typeof(a=f.src)||Array.isArray(a)&&"string"==typeof a[0])&&(l=function(e,t,u){i[n]=u,--r,e&&o.push(e),c()},++r),u[n]=je(e,f,l)}),c(),u}const Ge=d,Me=F,De="undefined"!=typeof document&&document.getElementById?document.getElementById.bind(document):function(){return null},Xe={};function We(e,t){return Xe[t].bindPoint}function Ne(e,t){return function(n){e.uniform1i(t,n)}}function Ve(e,t){return function(n){e.uniform1iv(t,n)}}function He(e,t){return function(n){e.uniform2iv(t,n)}}function qe(e,t){return function(n){e.uniform3iv(t,n)}}function Ye(e,t){return function(n){e.uniform4iv(t,n)}}function $e(e,t,n,r){const o=We(0,t);return N(e)?function(t){let u,i;R(e,t)?(u=t,i=null):(u=t.texture,i=t.sampler),e.uniform1i(r,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(o,u),e.bindSampler(n,i)}:function(t){e.uniform1i(r,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(o,t)}}function Ke(e,t,n,r,o){const u=We(0,t),i=new Int32Array(o);for(let e=0;e<o;++e)i[e]=n+e;return N(e)?function(t){e.uniform1iv(r,i),t.forEach(function(t,r){let o,c;e.activeTexture(e.TEXTURE0+i[r]),R(e,t)?(o=t,c=null):(o=t.texture,c=t.sampler),e.bindSampler(n,c),e.bindTexture(u,o)})}:function(t){e.uniform1iv(r,i),t.forEach(function(t,n){e.activeTexture(e.TEXTURE0+i[n]),e.bindTexture(u,t)})}}function Ze(e,t){return function(n){n.value?(e.disableVertexAttribArray(t),e.vertexAttrib4fv(t,n.value)):(e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||e.FLOAT,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor))}}function Je(e,t){return function(n){n.value?(e.disableVertexAttribArray(t),e.vertexAttrib4iv(t,n.value)):(e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||e.INT,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor))}}function Qe(e,t){return function(n){n.value?(e.disableVertexAttribArray(t),e.vertexAttrib4uiv(t,n.value)):(e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||e.UNSIGNED_INT,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor))}}function et(e,t,n){const r=n.size,o=n.count;return function(n){e.bindBuffer(e.ARRAY_BUFFER,n.buffer);const u=n.size||n.numComponents||r,i=u/o,c=n.type||e.FLOAT,f=Xe[c].size*u,l=n.normalize||!1,a=n.offset||0,s=f/o;for(let r=0;r<o;++r)e.enableVertexAttribArray(t+r),e.vertexAttribPointer(t+r,i,c,l,f,a+s*r),void 0!==n.divisor&&e.vertexAttribDivisor(t+r,n.divisor)}}Xe[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(n){e.uniform1f(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1fv(t,n)}}},Xe[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(n){e.uniform2fv(t,n)}}},Xe[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(n){e.uniform3fv(t,n)}}},Xe[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(n){e.uniform4fv(t,n)}}},Xe[5124]={Type:Int32Array,size:4,setter:Ne,arraySetter:Ve},Xe[35667]={Type:Int32Array,size:8,setter:He},Xe[35668]={Type:Int32Array,size:12,setter:qe},Xe[35669]={Type:Int32Array,size:16,setter:Ye},Xe[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(n){e.uniform1ui(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1uiv(t,n)}}},Xe[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(n){e.uniform2uiv(t,n)}}},Xe[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(n){e.uniform3uiv(t,n)}}},Xe[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(n){e.uniform4uiv(t,n)}}},Xe[35670]={Type:Uint32Array,size:4,setter:Ne,arraySetter:Ve},Xe[35671]={Type:Uint32Array,size:8,setter:He},Xe[35672]={Type:Uint32Array,size:12,setter:qe},Xe[35673]={Type:Uint32Array,size:16,setter:Ye},Xe[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}},Xe[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}},Xe[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}},Xe[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}},Xe[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}},Xe[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}},Xe[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}},Xe[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}},Xe[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}},Xe[35678]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:3553},Xe[35680]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:34067},Xe[35679]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:32879},Xe[35682]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:3553},Xe[36289]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:35866},Xe[36292]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:35866},Xe[36293]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:34067},Xe[36298]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:3553},Xe[36299]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:32879},Xe[36300]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:34067},Xe[36303]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:35866},Xe[36306]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:3553},Xe[36307]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:32879},Xe[36308]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:34067},Xe[36311]={Type:null,size:0,setter:$e,arraySetter:Ke,bindPoint:35866};const tt={};tt[5126]={size:4,setter:Ze},tt[35664]={size:8,setter:Ze},tt[35665]={size:12,setter:Ze},tt[35666]={size:16,setter:Ze},tt[5124]={size:4,setter:Je},tt[35667]={size:8,setter:Je},tt[35668]={size:12,setter:Je},tt[35669]={size:16,setter:Je},tt[5125]={size:4,setter:Qe},tt[36294]={size:8,setter:Qe},tt[36295]={size:12,setter:Qe},tt[36296]={size:16,setter:Qe},tt[35670]={size:4,setter:Je},tt[35671]={size:8,setter:Je},tt[35672]={size:12,setter:Je},tt[35673]={size:16,setter:Je},tt[35674]={size:4,setter:et,count:2},tt[35675]={size:9,setter:et,count:3},tt[35676]={size:16,setter:et,count:4};const nt=/^[ \t]*\n/;function rt(e,t,n,r){const o=r||Ge,u=e.createShader(n);let i=0;if(nt.test(t)&&(i=1,t=t.replace(nt,"")),e.shaderSource(u,t),e.compileShader(u),!e.getShaderParameter(u,e.COMPILE_STATUS)){const n=e.getShaderInfoLog(u);return o(function(e,t){return t=t||0,++t,e.split("\n").map(function(e,n){return n+t+": "+e}).join("\n")}(t,i)+"\n*** Error compiling shader: "+n),e.deleteShader(u),null}return u}function ot(e,t,n){let r;if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e)n=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;const t=e;n=t.errorCallback,e=t.attribLocations,r=t.transformFeedbackVaryings}const o={errorCallback:n||Ge,transformFeedbackVaryings:r};if(e){let n={};Array.isArray(e)?e.forEach(function(e,r){n[e]=t?t[r]:r}):n=e,o.attribLocations=n}return o}const ut=["VERTEX_SHADER","FRAGMENT_SHADER"];function it(e,t){return t.indexOf("frag")>=0?e.FRAGMENT_SHADER:t.indexOf("vert")>=0?e.VERTEX_SHADER:void 0}function ct(e,t){t.forEach(function(t){e.deleteShader(t)})}function ft(e,t,n,r,o){const u=ot(n,r,o),i=[],c=[];for(let n=0;n<t.length;++n){let r=t[n];if("string"==typeof r){const t=De(r),o=t?t.text:r;let i=e[ut[n]];t&&t.type&&(i=it(e,t.type)||i),r=rt(e,o,i,u.errorCallback),c.push(r)}g(e,r)&&i.push(r)}if(i.length!==t.length)return u.errorCallback("not enough shaders for program"),ct(e,c),null;const f=e.createProgram();i.forEach(function(t){e.attachShader(f,t)}),u.attribLocations&&Object.keys(u.attribLocations).forEach(function(t){e.bindAttribLocation(f,u.attribLocations[t],t)});let l=u.transformFeedbackVaryings;if(l&&(l.attribs&&(l=l.attribs),Array.isArray(l)||(l=Object.keys(l)),e.transformFeedbackVaryings(f,l,u.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(f),!e.getProgramParameter(f,e.LINK_STATUS)){const t=e.getProgramInfoLog(f);return u.errorCallback("Error in program linking:"+t),e.deleteProgram(f),ct(e,c),null}return f}function lt(e,t,n,r){let o="";const u=De(t);if(!u)throw"*** Error: unknown script element"+t;o=u.text;const i=n||it(e,u.type);if(!i)throw"*** Error: unknown shader type";return rt(e,o,i,r)}function at(e,t,n,r,o){const u=ot(n,r,o),i=[];for(let n=0;n<t.length;++n){const r=lt(e,t[n],e[ut[n]],u.errorCallback);if(!r)return null;i.push(r)}return ft(e,i,u)}function st(e,t,n,r,o){const u=ot(n,r,o),i=[];for(let n=0;n<t.length;++n){const r=rt(e,t[n],e[ut[n]],u.errorCallback);if(!r)return null;i.push(r)}return ft(e,i,u)}function yt(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function mt(e,t){let n=0;function r(t,r){const o=e.getUniformLocation(t,r.name),u=r.size>1&&"[0]"===r.name.substr(-3),i=r.type,c=Xe[i];if(!c)throw"unknown type: 0x"+i.toString(16);let f;if(c.bindPoint){const t=n;n+=r.size,f=u?c.arraySetter(e,i,t,o,r.size):c.setter(e,i,t,o,r.size)}else f=c.arraySetter&&u?c.arraySetter(e,o):c.setter(e,o);return f.location=o,f}const o={},u=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<u;++n){const u=e.getActiveUniform(t,n);if(yt(u))continue;let i=u.name;"[0]"===i.substr(-3)&&(i=i.substr(0,i.length-3));const c=r(t,u);o[i]=c}return o}function bt(e,t){const n={},r=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS);for(let o=0;o<r;++o){const r=e.getTransformFeedbackVarying(t,o);n[r.name]={index:o,type:r.type,size:r.size}}return n}function pt(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(const r in n){const o=t[r];if(o){const t=n[r];t.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,o.index,t.buffer,t.offset,t.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,t.buffer)}}}function dt(e,t,n){const r=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,r),e.useProgram(t.program),pt(e,t,n),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),function(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(const r in n){const n=t[r];n&&e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n.index,null)}}(e,t,n),r}function Ft(e,t){const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[],o=[];for(let u=0;u<n;++u){o.push(u),r.push({});const n=e.getActiveUniform(t,u);if(yt(n))break;r[u].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(n){const u=n[0],i=n[1];e.getActiveUniforms(t,o,e[u]).forEach(function(e,t){r[t][i]=e})});const u={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let n=0;n<i;++n){const r=e.getActiveUniformBlockName(t,n),o={index:n,usedByVertexShader:e.getActiveUniformBlockParameter(t,n,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,n,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,n,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,n,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};o.used=o.usedByVertexSahder||o.usedByFragmentShader,u[r]=o}return{blockSpecs:u,uniformData:r}}const xt=/\[\d+\]\.$/;function At(e,t,n,r){const o=n.blockSpecs,u=n.uniformData,i=o[r];if(!i)return Me("no uniform block object named:",r),{name:r,uniforms:{}};const c=new ArrayBuffer(i.size),f=e.createBuffer(),l=i.index;e.bindBuffer(e.UNIFORM_BUFFER,f),e.uniformBlockBinding(t,i.index,l);let a=r+".";xt.test(a)&&(a=a.replace(xt,"."));const s={};return i.uniformIndices.forEach(function(e){const t=u[e],n=Xe[t.type],r=n.Type,o=t.size*n.size;let i=t.name;i.substr(0,a.length)===a&&(i=i.substr(a.length)),s[i]=new r(c,t.offset,o/r.BYTES_PER_ELEMENT)}),{name:r,array:c,asFloat:new Float32Array(c),buffer:f,uniforms:s}}function Et(e,t,n){return At(e,t.program,t.uniformBlockSpec,n)}function Tt(e,t,n){const r=(t.uniformBlockSpec||t).blockSpecs[n.name];if(r){const t=r.index;return e.bindBufferRange(e.UNIFORM_BUFFER,t,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function _t(e,t,n){Tt(e,t,n)&&e.bufferData(e.UNIFORM_BUFFER,n.array,e.DYNAMIC_DRAW)}function Pt(e,t){const n=e.uniforms;for(const e in t){const r=n[e];if(r){const n=t[e];n.length?r.set(n):r[0]=n}}}function gt(e,t){const n=e.uniformSetters||e,r=arguments.length;for(let e=1;e<r;++e){const t=arguments[e];if(Array.isArray(t)){const e=t.length;for(let r=0;r<e;++r)gt(n,t[r])}else for(const e in t){const r=n[e];r&&r(t[e])}}}function Rt(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<r;++o){const r=e.getActiveAttrib(t,o);if(yt(r))continue;const u=e.getAttribLocation(t,r.name),i=tt[r.type],c=i.setter(e,u,i);c.location=u,n[r.name]=c}return n}function ht(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function wt(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(ht(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indices))}function zt(e,t){const n={program:t,uniformSetters:mt(e,t),attribSetters:Rt(e,t)};return N(e)&&(n.uniformBlockSpec=Ft(e,t),n.transformFeedbackInfo=bt(e,t)),n}function vt(e,t,n,r,o){const u=ot(n,r,o);let i=!0;if(t=t.map(function(e){if(e.indexOf("\n")<0){const t=De(e);t?e=t.text:(u.errorCallback("no element with id: "+e),i=!1)}return e}),!i)return null;const c=st(e,t,u);return c?zt(e,c):null}function Ut(e,t,n,r,o,u){n=void 0===n?e.TRIANGLES:n;const i=t.indices,c=t.elementType,f=void 0===r?t.numElements:r;o=void 0===o?0:o,c||i?void 0!==u?e.drawElementsInstanced(n,f,void 0===c?e.UNSIGNED_SHORT:t.elementType,o,u):e.drawElements(n,f,void 0===c?e.UNSIGNED_SHORT:t.elementType,o):void 0!==u?e.drawArraysInstanced(n,o,f,u):e.drawArrays(n,o,f)}function St(e,t){let n=null,r=null;t.forEach(function(t){if(!1===t.active)return;const o=t.programInfo,u=t.vertexArrayInfo||t.bufferInfo;let i=!1;const c=void 0===t.type?e.TRIANGLES:t.type;o!==n&&(n=o,e.useProgram(o.program),i=!0),(i||u!==r)&&(r&&r.vertexArrayObject&&!u.vertexArrayObject&&e.bindVertexArray(null),r=u,wt(e,o,u)),gt(o,t.uniforms),Ut(e,u,c,t.count,t.offset,t.instanceCount)}),r.vertexArrayObject&&e.bindVertexArray(null)}const Ct=36064,It=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],Bt={};Bt[34041]=33306,Bt[6401]=36128,Bt[36168]=36128,Bt[6402]=36096,Bt[33189]=36096;const Ot={};function jt(e,t,n,r){const o=e.FRAMEBUFFER,u=e.createFramebuffer();e.bindFramebuffer(o,u),n=n||e.drawingBufferWidth,r=r||e.drawingBufferHeight;let i=0;const c={framebuffer:u,attachments:[],width:n,height:r};return(t=t||It).forEach(function(t){let u=t.attachment;const f=t.format;let l=function(e){return Bt[e]}(f);if(l||(l=Ct+i++),!u)if(function(e){return Ot[e]}(f))u=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,f,n,r);else{const o=Object.assign({},t);o.width=n,o.height=r,void 0===o.auto&&(o.auto=!1,o.min=o.min||o.minMag||e.LINEAR,o.mag=o.mag||o.minMag||e.LINEAR,o.wrapS=o.wrapS||o.wrap||e.CLAMP_TO_EDGE,o.wrapT=o.wrapT||o.wrap||e.CLAMP_TO_EDGE),u=je(e,o)}if(P(e,u))e.framebufferRenderbuffer(o,l,e.RENDERBUFFER,u);else{if(!R(e,u))throw"unknown attachment type";e.framebufferTexture2D(o,l,t.texTarget||e.TEXTURE_2D,u,t.level||0)}c.attachments.push(u)}),c}function kt(e,t,n,r,o){r=r||e.drawingBufferWidth,o=o||e.drawingBufferHeight,t.width=r,t.height=o,(n=n||It).forEach(function(n,u){const i=t.attachments[u],c=n.format;if(P(e,i))e.bindRenderbuffer(e.RENDERBUFFER,i),e.renderbufferStorage(e.RENDERBUFFER,c,r,o);else{if(!R(e,i))throw"unknown attachment type";ke(e,i,n,r,o)}})}function Lt(e,t,n){n=n||e.FRAMEBUFFER,t?(e.bindFramebuffer(n,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(n,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}function Gt(e,t,n){const r=e.createVertexArray();return e.bindVertexArray(r),t.length||(t=[t]),t.forEach(function(t){wt(e,t,n)}),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}function Mt(e,t,n,r){const o=e.createVertexArray();return e.bindVertexArray(o),ht(t,n),r&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bindVertexArray(null),o}function Dt(e,t,n){return Mt(e,t.attribSetters||t,n.attribs,n.indices)}Ot[32854]=!0,Ot[32855]=!0,Ot[36194]=!0,Ot[34041]=!0,Ot[33189]=!0,Ot[6401]=!0,Ot[36168]=!0;const Xt={addExtensionsToContext:!0};function Wt(e){p(e,Xt),z(e),le(e)}const Nt=/^(.*?)_/;function Vt(e,t){H(e,0);const n=e.getExtension(t);if(n){const r={},o=Nt.exec(t)[1],u="_"+o;for(const t in n){const i=n[t],c="function"==typeof i,f=c?o:u;let l=t;t.endsWith(f)&&(l=t.substring(0,t.length-f.length)),void 0!==e[l]?c||e[l]===i||F(l,e[l],i,t):c?e[l]=function(e){return function(){return e.apply(n,arguments)}}(i):(e[l]=i,r[l]=i)}r.constructor={name:n.constructor.name},H(r,0)}return n}const Ht=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function qt(e){for(let t=0;t<Ht.length;++t)Vt(e,Ht[t])}function Yt(e,t){return function(e,t){const n=["webgl","experimental-webgl"];let r=null;for(let o=0;o<n.length;++o)if(r=e.getContext(n[o],t)){Xt.addExtensionsToContext&&qt(r);break}return r}(e,t)}function $t(e,t){return function(e,t){const n=["webgl2","webgl","experimental-webgl"];let r=null;for(let o=0;o<n.length;++o)if(r=e.getContext(n[o],t)){Xt.addExtensionsToContext&&qt(r);break}return r}(e,t)}function Kt(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,r=e.clientHeight*t|0;return(e.width!==n||e.height!==r)&&(e.width=n,e.height=r,!0)}n.d(t,"addExtensionsToContext",function(){return qt}),n.d(t,"getContext",function(){return $t}),n.d(t,"getWebGLContext",function(){return Yt}),n.d(t,"resizeCanvasToDisplaySize",function(){return Kt}),n.d(t,"setDefaults",function(){return Wt}),n.d(t,"createAttribsFromArrays",function(){return L}),n.d(t,"createBuffersFromArrays",function(){return W}),n.d(t,"createBufferFromArray",function(){return X}),n.d(t,"createBufferFromTypedArray",function(){return U}),n.d(t,"createBufferInfoFromArrays",function(){return D}),n.d(t,"setAttribInfoBufferFromArray",function(){return G}),n.d(t,"setAttributePrefix",function(){return w}),n.d(t,"setAttributeDefaults_",function(){return z}),n.d(t,"getNumComponents_",function(){return j}),n.d(t,"getArray_",function(){return C}),n.d(t,"drawBufferInfo",function(){return Ut}),n.d(t,"drawObjectList",function(){return St}),n.d(t,"bindFramebufferInfo",function(){return Lt}),n.d(t,"createFramebufferInfo",function(){return jt}),n.d(t,"resizeFramebufferInfo",function(){return kt}),n.d(t,"createAttributeSetters",function(){return Rt}),n.d(t,"createProgram",function(){return ft}),n.d(t,"createProgramFromScripts",function(){return at}),n.d(t,"createProgramFromSources",function(){return st}),n.d(t,"createProgramInfo",function(){return vt}),n.d(t,"createProgramInfoFromProgram",function(){return zt}),n.d(t,"createUniformSetters",function(){return mt}),n.d(t,"createUniformBlockSpecFromProgram",function(){return Ft}),n.d(t,"createUniformBlockInfoFromProgram",function(){return At}),n.d(t,"createUniformBlockInfo",function(){return Et}),n.d(t,"createTransformFeedback",function(){return dt}),n.d(t,"createTransformFeedbackInfo",function(){return bt}),n.d(t,"bindTransformFeedbackInfo",function(){return pt}),n.d(t,"setAttributes",function(){return ht}),n.d(t,"setBuffersAndAttributes",function(){return wt}),n.d(t,"setUniforms",function(){return gt}),n.d(t,"setUniformBlock",function(){return _t}),n.d(t,"setBlockUniforms",function(){return Pt}),n.d(t,"bindUniformBlock",function(){return Tt}),n.d(t,"setTextureDefaults_",function(){return le}),n.d(t,"createSampler",function(){return xe}),n.d(t,"createSamplers",function(){return Ae}),n.d(t,"setSamplerParameters",function(){return Fe}),n.d(t,"createTexture",function(){return je}),n.d(t,"setEmptyTexture",function(){return Oe}),n.d(t,"setTextureFromArray",function(){return Be}),n.d(t,"loadTextureFromUrl",function(){return Se}),n.d(t,"setTextureFromElement",function(){return ge}),n.d(t,"setTextureFilteringForSize",function(){return Ee}),n.d(t,"setTextureParameters",function(){return de}),n.d(t,"setDefaultTextureColor",function(){return fe}),n.d(t,"createTextures",function(){return Le}),n.d(t,"resizeTexture",function(){return ke}),n.d(t,"canGenerateMipmap",function(){return re}),n.d(t,"canFilter",function(){return oe}),n.d(t,"getNumComponentsForFormat",function(){return ue}),n.d(t,"getBytesPerElementForInternalFormat",function(){return ee}),n.d(t,"getFormatAndTypeForInternalFormat",function(){return te}),n.d(t,"getGLTypeForTypedArray",function(){return s}),n.d(t,"getGLTypeForTypedArrayType",function(){return y}),n.d(t,"getTypedArrayTypeForGLType",function(){return m}),n.d(t,"isArrayBuffer",function(){return b}),n.d(t,"glEnumToString",function(){return H}),n.d(t,"isWebGL1",function(){return V}),n.d(t,"isWebGL2",function(){return N}),n.d(t,"createVertexArrayInfo",function(){return Gt}),n.d(t,"createVAOAndSetAttributes",function(){return Mt}),n.d(t,"createVAOFromBufferInfo",function(){return Dt})}])});