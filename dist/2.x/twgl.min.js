/*!
 * @license twgl.js 2.6.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.twgl=r():e.twgl=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){var n,i;n=[t(1)],i=function(e){"use strict";return e}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[t(2),t(5),t(7),t(6),t(8),t(3),t(9),t(4)],i=function(e,r,t,n,i,a,o,u){"use strict";function f(r){u.copyExistingProperties(r,d),e.setDefaults_(r),i.setDefaults_(r)}function s(e){if(e&&d.enableVertexArrayObjects&&u.isWebGL1(e)){var r=e.getExtension("OES_vertex_array_object");r&&(e.createVertexArray=function(){return r.createVertexArrayOES()},e.deleteVertexArray=function(e){r.deleteVertexArrayOES(e)},e.isVertexArray=function(e){return r.isVertexArrayOES(e)},e.bindVertexArray=function(e){r.bindVertexArrayOES(e)},e.VERTEX_ARRAY_BINDING=r.VERTEX_ARRAY_BINDING_OES)}}function c(e,r){for(var t=["webgl","experimental-webgl"],n=null,i=0;i<t.length;++i){try{n=e.getContext(t[i],r)}catch(e){}if(n)break}return n}function E(e,r){var t=c(e,r);return s(t),t}function l(e,r){for(var t=["webgl2","experimental-webgl2","webgl","experimental-webgl"],n=null,i=0;i<t.length;++i){try{n=e.getContext(t[i],r)}catch(e){}if(n)break}return n}function m(e,r){var t=l(e,r);return s(t),t}function y(e,r){r=r||1,r=Math.max(1,r);var t=e.clientWidth*r|0,n=e.clientHeight*r|0;return(e.width!==t||e.height!==n)&&(e.width=t,e.height=n,!0)}function A(e){return"_"!==e[e.length-1]}function p(e,r){return Object.keys(e).filter(A).forEach(function(t){r[t]=e[t]}),r}var d={enableVertexArrayObjects:!0},T={getContext:m,getWebGLContext:E,isWebGL1:u.isWebGL1,isWebGL2:u.isWebGL2,resizeCanvasToDisplaySize:y,setDefaults:f},v={attributes:e,draw:r,framebuffers:t,programs:n,textures:i,typedArrays:a,vertexArrays:o};return Object.keys(v).forEach(function(e){var r=v[e];p(r,T),T[e]=p(r,{})}),T}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[t(3),t(4)],i=function(e,r){"use strict";function t(e){d.attribPrefix=e}function n(e){r.copyExistingProperties(e,d)}function i(e,r,t,n,i){e.bindBuffer(r,t),e.bufferData(r,n,i||e.STATIC_DRAW)}function a(e,r,t,n){if(r instanceof WebGLBuffer)return r;t=t||e.ARRAY_BUFFER;var a=e.createBuffer();return i(e,t,a,r,n),a}function o(e){return"indices"===e}function u(e){return e instanceof Int8Array||e instanceof Uint8Array}function f(e){return e.length?e:e.data}function s(e,r){var t;if(t=T.test(e)?2:v.test(e)?4:3,r%t>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+t+" but "+r+" values is not evenly divisible by "+t+". You should specify it.";return t}function c(e,r){return e.numComponents||e.size||s(r,f(e).length)}function E(r,t){if(e.isArrayBuffer(r))return r;if(e.isArrayBuffer(r.data))return r.data;Array.isArray(r)&&(r={data:r});var n=r.type;return n||(n=o(t)?Uint16Array:Float32Array),new n(r.data)}function l(r,t){var n={};return Object.keys(t).forEach(function(i){if(!o(i)){var f=t[i],s=f.attrib||f.name||f.attribName||d.attribPrefix+i,l=E(f,i);n[s]={buffer:a(r,l,void 0,f.drawType),numComponents:c(f,i),type:e.getGLTypeForTypedArray(l),normalize:void 0!==f.normalize?f.normalize:u(l),stride:f.stride||0,offset:f.offset||0,drawType:f.drawType}}}),n}function m(e,r,t,n){t=E(t),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,t)):i(e,e.ARRAY_BUFFER,r.buffer,t,r.drawType)}function y(r,t){var n={attribs:l(r,t)},i=t.indices;return i?(i=E(i,"indices"),n.indices=a(r,i,r.ELEMENT_ARRAY_BUFFER),n.numElements=i.length,n.elementType=e.getGLTypeForTypedArray(i)):n.numElements=h(t),n}function A(e,r,t){var n="indices"===t?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,i=E(r,t);return a(e,i,n)}function p(r,t){var n={};return Object.keys(t).forEach(function(e){n[e]=A(r,t[e],e)}),t.indices?(n.numElements=t.indices.length,n.elementType=e.getGLTypeForTypedArray(E(t.indices),"indices")):n.numElements=h(t),n}var d={attribPrefix:""},T=/coord|texture/i,v=/color|colour/i,h=function(){var e=["position","positions","a_position"];return function(r){for(var t,n=0;n<e.length&&(t=e[n],!(t in r));++n);n===e.length&&(t=Object.keys(r)[0]);var i=r[t],a=f(i).length,o=c(i,t),u=a/o;if(a%o>0)throw"numComponents "+o+" not correct for length "+a;return u}}();return{createAttribsFromArrays:l,createBuffersFromArrays:p,createBufferFromArray:A,createBufferFromTypedArray:a,createBufferInfoFromArrays:y,setAttribInfoBufferFromArray:m,setAttributePrefix:t,setDefaults_:n,getNumComponents_:c,getArray_:f}}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[],i=function(){"use strict";function e(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return i;if(e instanceof Uint8ClampedArray)return i;if(e instanceof Int16Array)return a;if(e instanceof Uint16Array)return o;if(e instanceof Int32Array)return u;if(e instanceof Uint32Array)return f;if(e instanceof Float32Array)return s;throw"unsupported typed array type"}function r(e){switch(e){case n:return Int8Array;case i:return Uint8Array;case a:return Int16Array;case o:return Uint16Array;case u:return Int32Array;case f:return Uint32Array;case s:return Float32Array;default:throw"unknown gl type"}}function t(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}var n=5120,i=5121,a=5122,o=5123,u=5124,f=5125,s=5126;return{getGLTypeForTypedArray:e,getTypedArrayTypeForGLType:r,isArrayBuffer:t}}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[],i=function(){"use strict";function e(e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function r(e,r,t){e.forEach(function(e){var n=r[e];void 0!==n&&(t[e]=n)})}function t(e,r){Object.keys(r).forEach(function(t){r.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(r[t]=e[t])})}function n(e){return parseFloat(e.getParameter(e.VERSION).substr(6))}function i(e){return 0===e.getParameter(e.VERSION).indexOf("WebGL 2.0")}function a(e){var r=n(e);return r<=1&&r>0}var o=window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},u=window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){};return{copyExistingProperties:t,copyNamedProperties:r,shallowCopy:e,isWebGL1:a,isWebGL2:i,error:o,warn:u}}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[t(6)],i=function(e){"use strict";function r(e,r,t,n,i){t=void 0===t?e.TRIANGLES:t;var a=r.indices,o=r.elementType,u=void 0===n?r.numElements:n;i=void 0===i?0:i,o||a?e.drawElements(t,u,void 0===o?e.UNSIGNED_SHORT:r.elementType,i):e.drawArrays(t,i,u)}function t(t,n){var i=null,a=null;n.forEach(function(n){if(n.active!==!1){var o=n.programInfo,u=n.vertexArrayInfo||n.bufferInfo,f=!1,s=void 0===n.type?t.TRIANGLES:n.type;o!==i&&(i=o,t.useProgram(o.program),f=!0),(f||u!==a)&&(a&&a.vertexArrayObject&&!u.vertexArrayObject&&t.bindVertexArray(null),a=u,e.setBuffersAndAttributes(t,o,u)),e.setUniforms(o,n.uniforms),r(t,u,s,n.count,n.offset)}}),a.vertexArrayObject&&t.bindVertexArray(null)}return{drawBufferInfo:r,drawObjectList:t}}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[t(4)],i=function(e){"use strict";function r(e,r){return ke[r].bindPoint}function t(e,r){return function(t){e.uniform1f(r,t)}}function n(e,r){return function(t){e.uniform1fv(r,t)}}function i(e,r){return function(t){e.uniform2fv(r,t)}}function a(e,r){return function(t){e.uniform3fv(r,t)}}function o(e,r){return function(t){e.uniform4fv(r,t)}}function u(e,r){return function(t){e.uniform1i(r,t)}}function f(e,r){return function(t){e.uniform1iv(r,t)}}function s(e,r){return function(t){e.uniform2iv(r,t)}}function c(e,r){return function(t){e.uniform3iv(r,t)}}function E(e,r){return function(t){e.uniform4iv(r,t)}}function l(e,r){return function(t){e.uniform1ui(r,t)}}function m(e,r){return function(t){e.uniform1uiv(r,t)}}function y(e,r){return function(t){e.uniform2uiv(r,t)}}function A(e,r){return function(t){e.uniform3uiv(r,t)}}function p(e,r){return function(t){e.uniform4uiv(r,t)}}function d(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}function T(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}function v(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}function h(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}function _(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}function b(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}function g(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}function R(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}function x(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}function U(e,t,n,i){var a=r(e,t);return function(r){e.uniform1i(i,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(a,r)}}function P(e,t,n,i,a){for(var o=r(e,t),u=new Int32Array(a),f=0;f<a;++f)u[f]=n+f;return function(r){e.uniform1iv(i,u),r.forEach(function(r,t){e.activeTexture(e.TEXTURE0+u[t]),e.bindTexture(o,r)})}}function w(e,r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||e.FLOAT,t.normalize||!1,t.stride||0,t.offset||0)}}function B(e,r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||e.INT,t.stride||0,t.offset||0)}}function I(e,r,t){var n=t.size,i=t.count;return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer);for(var a=t.size||t.numComponents||n,o=a/i,u=t.type||e.FLOAT,f=ke[u],s=f.size*a,c=t.normalize||!1,E=t.offset||0,l=s/i,m=0;m<i;++m)e.enableVertexAttribArray(r+m),e.vertexAttribPointer(r+m,o,u,c,s,E+l*m)}}function F(e,r){return r=r||0,++r,e.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}function S(e,r,t,n){var i=n||$,a=e.createShader(t),o=0;We.test(r)&&(o=1,r=r.replace(We,"")),e.shaderSource(a,r),e.compileShader(a);var u=e.getShaderParameter(a,e.COMPILE_STATUS);if(!u){var f=e.getShaderInfoLog(a);return i(F(r,o)+"\n*** Error compiling shader: "+f),e.deleteShader(a),null}return a}function L(e,r,t){if("function"==typeof r&&(t=r,r=void 0),"function"==typeof e)t=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var n=e;t=n.errorCallback,e=n.attribLocations}var i={errorCallback:t||$};if(e){var a={};Array.isArray(e)?e.forEach(function(e,t){a[e]=r?r[t]:t}):a=e,i.attribLocations=a}return i}function C(e,r,t,n,i){var a=L(t,n,i),o=e.createProgram();r.forEach(function(r){e.attachShader(o,r)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(r){e.bindAttribLocation(o,a.attribLocations[r],r)}),e.linkProgram(o);var u=e.getProgramParameter(o,e.LINK_STATUS);if(!u){var f=e.getProgramInfoLog(o);return a.errorCallback("Error in program linking:"+f),e.deleteProgram(o),null}return o}function O(e,r,t,n){var i,a="",o=document.getElementById(r);if(!o)throw"*** Error: unknown script element"+r;if(a=o.text,!t)if("x-shader/x-vertex"===o.type)i=e.VERTEX_SHADER;else if("x-shader/x-fragment"===o.type)i=e.FRAGMENT_SHADER;else if(i!==e.VERTEX_SHADER&&i!==e.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return S(e,a,t?t:i,n)}function N(e,r,t,n,i){for(var a=L(t,n,i),o=[],u=0;u<r.length;++u){var f=O(e,r[u],e[je[u]],a.errorCallback);if(!f)return null;o.push(f)}return C(e,o,a)}function z(e,r,t,n,i){for(var a=L(t,n,i),o=[],u=0;u<r.length;++u){var f=S(e,r[u],e[je[u]],a.errorCallback);if(!f)return null;o.push(f)}return C(e,o,a)}function D(e,r){function t(r,t){var i=e.getUniformLocation(r,t.name),a=t.size>1&&"[0]"===t.name.substr(-3),o=t.type,u=ke[o];if(!u)throw"unknown type: 0x"+o.toString(16);if(u.bindPoint){var f=n;return n+=t.size,a?u.arraySetter(e,o,f,i,t.size):u.setter(e,o,f,i,t.size)}return u.arraySetter&&a?u.arraySetter(e,i):u.setter(e,i)}for(var n=0,i={},a=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),o=0;o<a;++o){var u=e.getActiveUniform(r,o);if(!u)break;var f=u.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var s=t(r,u);i[f]=s}return i}function M(e,r){for(var t=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),n=[],i=[],a=0;a<t;++a){i.push(a),n.push({});var o=e.getActiveUniform(r,a);if(!o)break;n[a].name=o.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var a=t[0],o=t[1];e.getActiveUniforms(r,i,e[a]).forEach(function(e,r){n[r][o]=e})});var u={},f=e.getProgramParameter(r,e.ACTIVE_UNIFORM_BLOCKS);for(a=0;a<f;++a){var s=e.getActiveUniformBlockName(r,a),c={index:a,usedByVertexShader:e.getActiveUniformBlockParameter(r,a,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(r,a,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(r,a,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(r,a,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexSahder||c.usedByFragmentShader,u[s]=c}return{blockSpecs:u,uniformData:n}}function G(e,r,t,n){var i=t.blockSpecs,a=t.uniformData,o=i[n];if(!o)return J("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(o.size),f=e.createBuffer(),s=o.index;e.bindBuffer(e.UNIFORM_BUFFER,f),e.uniformBlockBinding(r,o.index,s);var c=n+".";He.test(c)&&(c=c.replace(He,"."));var E={};return o.uniformIndices.forEach(function(e){var r=a[e],t=ke[r.type],n=t.Type,i=r.size*t.size,o=r.name;o.substr(0,c.length)===c&&(o=o.substr(c.length)),E[o]=new n(u,r.offset,i/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:f,uniforms:E}}function X(e,r,t){return G(e,r.program,r.uniformBlockSpec,t)}function V(e,r,t){var n=r.uniformBlockSpec||r,i=n.blockSpecs[t.name];if(i){var a=i.index;return e.bindBufferRange(e.UNIFORM_BUFFER,a,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function k(e,r,t){V(e,r,t)&&e.bufferData(e.UNIFORM_BUFFER,t.array,e.DYNAMIC_DRAW)}function Y(e,r){var t=e.uniforms;for(var n in r){var i=t[n];if(i){var a=r[n];a.length?i.set(a):i[0]=a}}}function W(e,r){for(var t=e.uniformSetters||e,n=arguments.length,i=1;i<n;++i){var a=arguments[i];if(Array.isArray(a))for(var o=a.length,u=0;u<o;++u)W(t,a[u]);else for(var f in a){var s=t[f];s&&s(a[f])}}}function j(e,r){for(var t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),i=0;i<n;++i){var a=e.getActiveAttrib(r,i);if(!a)break;var o=e.getAttribLocation(r,a.name),u=Ye[a.type];t[a.name]=u.setter(e,o,u)}return t}function H(e,r){for(var t in r){var n=e[t];n&&n(r[t])}}function K(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(H(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indices))}function Z(r,t){var n=D(r,t),i=j(r,t),a={program:t,uniformSetters:n,attribSetters:i};return e.isWebGL2(r)&&(a.uniformBlockSpec=M(r,t)),a}function q(e,r,t,n,i){var a=L(t,n,i),o=!0;if(r=r.map(function(e){if(e.indexOf("\n")<0){var r=document.getElementById(e);r?e=r.text:(a.errorCallback("no element with id: "+e),o=!1)}return e}),!o)return null;var u=z(e,r,a);return u?Z(e,u):null}var $=e.error,J=e.warn,Q=5126,ee=35664,re=35665,te=35666,ne=5124,ie=35667,ae=35668,oe=35669,ue=35670,fe=35671,se=35672,ce=35673,Ee=35674,le=35675,me=35676,ye=35678,Ae=35680,pe=35679,de=35682,Te=35685,ve=35686,he=35687,_e=35688,be=35689,ge=35690,Re=36289,xe=36292,Ue=36293,Pe=5125,we=36294,Be=36295,Ie=36296,Fe=36298,Se=36299,Le=36300,Ce=36303,Oe=36306,Ne=36307,ze=36308,De=36311,Me=3553,Ge=34067,Xe=32879,Ve=35866,ke={};ke[Q]={Type:Float32Array,size:4,setter:t,arraySetter:n},ke[ee]={Type:Float32Array,size:8,setter:i},ke[re]={Type:Float32Array,size:12,setter:a},ke[te]={Type:Float32Array,size:16,setter:o},ke[ne]={Type:Int32Array,size:4,setter:u,arraySetter:f},ke[ie]={Type:Int32Array,size:8,setter:s},ke[ae]={Type:Int32Array,size:12,setter:c},ke[oe]={Type:Int32Array,size:16,setter:E},ke[Pe]={Type:Uint32Array,size:4,setter:l,arraySetter:m},ke[we]={Type:Uint32Array,size:8,setter:y},ke[Be]={Type:Uint32Array,size:12,setter:A},ke[Ie]={Type:Uint32Array,size:16,setter:p},ke[ue]={Type:Uint32Array,size:4,setter:u,arraySetter:f},ke[fe]={Type:Uint32Array,size:8,setter:s},ke[se]={Type:Uint32Array,size:12,setter:c},ke[ce]={Type:Uint32Array,size:16,setter:E},ke[Ee]={Type:Float32Array,size:16,setter:d},ke[le]={Type:Float32Array,size:36,setter:T},ke[me]={Type:Float32Array,size:64,setter:v},ke[Te]={Type:Float32Array,size:24,setter:h},ke[ve]={Type:Float32Array,size:32,setter:b},ke[he]={Type:Float32Array,size:24,setter:_},ke[_e]={Type:Float32Array,size:48,setter:R},ke[be]={Type:Float32Array,size:32,setter:g},ke[ge]={Type:Float32Array,size:48,setter:x},ke[ye]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Me},ke[Ae]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Ge},ke[pe]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Xe},ke[de]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Me},ke[Re]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Ve},ke[xe]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Ve},ke[Ue]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Ge},ke[Fe]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Me},ke[Se]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Xe},ke[Le]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Ge},ke[Ce]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Ve},ke[Oe]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Me},ke[Ne]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Xe},ke[ze]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Ge},ke[De]={Type:null,size:0,setter:U,arraySetter:P,bindPoint:Ve};var Ye={};Ye[Q]={size:4,setter:w},Ye[ee]={size:8,setter:w},Ye[re]={size:12,setter:w},Ye[te]={size:16,setter:w},Ye[ne]={size:4,setter:B},Ye[ie]={size:8,setter:B},Ye[ae]={size:12,setter:B},Ye[oe]={size:16,setter:B},Ye[Pe]={size:4,setter:B},Ye[we]={size:8,setter:B},Ye[Be]={size:12,setter:B},Ye[Ie]={size:16,setter:B},Ye[ue]={size:4,setter:B},Ye[fe]={size:8,setter:B},Ye[se]={size:12,setter:B},Ye[ce]={size:16,setter:B},Ye[Ee]={size:4,setter:I,count:2},Ye[le]={size:9,setter:I,count:3},Ye[me]={size:16,setter:I,count:4};var We=/^[ \t]*\n/,je=["VERTEX_SHADER","FRAGMENT_SHADER"],He=/\[\d+\]\.$/;return{createAttributeSetters:j,createProgram:C,createProgramFromScripts:N,createProgramFromSources:z,createProgramInfo:q,createProgramInfoFromProgram:Z,createUniformSetters:D,createUniformBlockSpecFromProgram:M,createUniformBlockInfoFromProgram:G,createUniformBlockInfo:X,setAttributes:H,setBuffersAndAttributes:K,setUniforms:W,setUniformBlock:k,setBlockUniforms:Y,bindUniformBlock:V}}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[t(8),t(4)],i=function(e,r){"use strict";function t(e){return R[e]}function n(e){return x[e]}function i(i,a,o,u){var f=i.FRAMEBUFFER,s=i.createFramebuffer();i.bindFramebuffer(f,s),o=o||i.drawingBufferWidth,u=u||i.drawingBufferHeight,a=a||g;var c=0,E={framebuffer:s,attachments:[],width:o,height:u};return a.forEach(function(a){var s=a.attachment,l=a.format,m=t(l);if(m||(m=d+c++),!s)if(n(l))s=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s),i.renderbufferStorage(i.RENDERBUFFER,l,o,u);else{var y=r.shallowCopy(a);y.width=o,y.height=u,void 0===y.auto&&(y.auto=!1,y.min=y.min||i.LINEAR,y.mag=y.mag||i.LINEAR,y.wrapS=y.wrapS||y.wrap||i.CLAMP_TO_EDGE,y.wrapT=y.wrapT||y.wrap||i.CLAMP_TO_EDGE),s=e.createTexture(i,y)}if(s instanceof WebGLRenderbuffer)i.framebufferRenderbuffer(f,m,i.RENDERBUFFER,s);else{if(!(s instanceof WebGLTexture))throw"unknown attachment type";i.framebufferTexture2D(f,m,a.texTarget||i.TEXTURE_2D,s,a.level||0)}E.attachments.push(s)}),E}function a(r,t,n,i,a){i=i||r.drawingBufferWidth,a=a||r.drawingBufferHeight,t.width=i,t.height=a,n=n||g,n.forEach(function(n,o){var u=t.attachments[o],f=n.format;if(u instanceof WebGLRenderbuffer)r.bindRenderbuffer(r.RENDERBUFFER,u),r.renderbufferStorage(r.RENDERBUFFER,f,i,a);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";e.resizeTexture(r,u,n,i,a)}})}function o(e,r,t){t=t||e.FRAMEBUFFER,r?(e.bindFramebuffer(t,r.framebuffer),e.viewport(0,0,r.width,r.height)):(e.bindFramebuffer(t,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}var u=5121,f=6402,s=6408,c=32854,E=32855,l=36194,m=33189,y=6401,A=36168,p=34041,d=36064,T=36096,v=36128,h=33306,_=33071,b=9729,g=[{format:s,type:u,min:b,wrap:_},{format:p}],R={};R[p]=h,R[y]=v,R[A]=v,R[f]=T,R[m]=T;var x={};return x[c]=!0,x[E]=!0,x[l]=!0,x[p]=!0,x[m]=!0,x[y]=!0,x[A]=!0,{bindFramebufferInfo:o,createFramebufferInfo:i,resizeFramebufferInfo:a}}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[t(3),t(4)],i=function(e,r){"use strict";function t(e){U.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function n(e){r.copyExistingProperties(e,U),e.textureColor&&t(e.textureColor)}function i(e,r){void 0!==r.colorspaceConversion&&(C.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.colorspaceConversion)),void 0!==r.premultiplyAlpha&&(C.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha)),void 0!==r.flipY&&(C.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY))}function a(e,r){void 0!==r.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.colorspaceConversion),void 0!==r.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),void 0!==r.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,C.flipY)}function o(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r),t.min&&e.texParameteri(n,e.TEXTURE_MIN_FILTER,t.min),t.mag&&e.texParameteri(n,e.TEXTURE_MAG_FILTER,t.mag),t.wrap&&(e.texParameteri(n,e.TEXTURE_WRAP_S,t.wrap),e.texParameteri(n,e.TEXTURE_WRAP_T,t.wrap),n===e.TEXTURE_3D&&e.texParameteri(n,e.TEXTURE_WRAP_R,t.wrap)),t.wrapR&&e.texParameteri(n,e.TEXTURE_WRAP_R,t.wrapR),t.wrapS&&e.texParameteri(n,e.TEXTURE_WRAP_S,t.wrapS),t.wrapT&&e.texParameteri(n,e.TEXTURE_WRAP_T,t.wrapT),t.minLod&&e.texParameteri(n,e.TEXTURE_MIN_LOD,t.minLod),t.maxLod&&e.texParameteri(n,e.TEXTURE_MAX_LOD,t.maxLod),t.baseLevel&&e.texParameteri(n,e.TEXTURE_BASE_LEVEL,t.baseLevel),t.maxLevel&&e.texParameteri(n,e.TEXTURE_MAX_LEVEL,t.maxLevel)}function u(e){return e=e||U.textureColor,P(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function f(e){return 0===(e&e-1)}function s(e,r,t,n,i){t=t||U.textureOptions;var a=t.target||e.TEXTURE_2D;n=n||t.width,i=i||t.height,e.bindTexture(a,r),f(n)&&f(i)?e.generateMipmap(a):(e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))}function c(e,r){return r=r||{},r.cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function E(e,r){var t=c(e,r),n=t.map(function(e,r){return{face:e,ndx:r}});return n.sort(function(e,r){return e.face-r.face}),n}function l(){}function m(e,t,n){function i(){u.removeEventListener("error",a),u.removeEventListener("load",o),u=null}function a(){var t="couldn't load image: "+e;r.error(t),n(t,u),i()}function o(){n(null,u),i()}n=n||l;var u=new Image;return t=void 0!==t?t:U.crossOrigin,void 0!==t&&(u.crossOrigin=t),u.addEventListener("error",a),u.addEventListener("load",o),u.src=e,u}function y(e,r,t){t=t||U.textureOptions;var n=t.target||e.TEXTURE_2D;if(e.bindTexture(n,r),t.color!==!1){var i=u(t.color);if(n===e.TEXTURE_CUBE_MAP)for(var a=0;a<6;++a)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);else n===e.TEXTURE_3D?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i)}}function A(e,t,n,i){i=i||l,n=n||U.textureOptions,y(e,t,n),n=r.shallowCopy(n);var a=m(n.src,n.crossOrigin,function(r,a){r?i(r,t,a):(O(e,t,a,n),i(null,t,a))});return a}function p(e,t,n,o){function u(r){return function(u,f){--d,u?T.push(u):f.width!==f.height?T.push("cubemap face img is not a square: "+f.src):(i(e,n),e.bindTexture(A,t),5===d?c(e).forEach(function(r){e.texImage2D(r,0,s,s,E,f)}):e.texImage2D(r,0,s,s,E,f),a(e,n),e.generateMipmap(A)),0===d&&o(T.length?T:void 0,p,t)}}o=o||l;var f=n.src;if(6!==f.length)throw"there must be 6 urls for a cubemap";var s=n.format||e.RGBA,E=n.type||e.UNSIGNED_BYTE,A=n.target||e.TEXTURE_2D;if(A!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";y(e,t,n),n=r.shallowCopy(n);var p,d=6,T=[],v=c(e,n);p=f.map(function(e,r){return m(e,n.crossOrigin,u(v[r]))})}function d(e){switch(e){case w:case F:return 1;case S:return 2;case B:return 3;case I:return 4;default:throw"unknown type: "+e}}function T(r,t){return P(t)?e.getGLTypeForTypedArray(t):r.UNSIGNED_BYTE}function v(e,r,t,n,i){if(i%1!==0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=i/n,t%1))throw"can't guess dimensions"}else if(n=i/t,n%1)throw"can't guess dimensions"}else{var a=Math.sqrt(i/(r===e.TEXTURE_CUBE_MAP?6:1));a%1===0?(t=a,n=a):(t=i,n=1)}return{width:t,height:n}}function h(r,t,n,o){o=o||U.textureOptions;var u=o.target||r.TEXTURE_2D;r.bindTexture(u,t);var f=o.width,s=o.height,c=o.depth,l=o.format||r.RGBA,m=o.internalFormat||l,y=o.type||T(r,n),A=d(l),p=n.length/A;if(p%1)throw"length wrong size for format: "+L(r,l);var h;if(u===r.TEXTURE_3D)if(f||s||c)!f||s&&c?!s||f&&c?(h=v(r,u,f,s,p/c),f=h.width,s=h.height):(h=v(r,u,f,c,p/s),f=h.width,c=h.height):(h=v(r,u,s,c,p/f),s=h.width,c=h.height);else{var _=Math.cbrt(p);if(_%1!==0)throw"can't guess cube size of array of numElements: "+p;f=_,s=_,c=_}else h=v(r,u,f,s,p),f=h.width,s=h.height;if(P(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{var b=e.getTypedArrayTypeForGLType(y);n=new b(n)}if(r.pixelStorei(r.UNPACK_ALIGNMENT,o.unpackAlignment||1),i(r,o),u===r.TEXTURE_CUBE_MAP){var g=p/6*A;E(r,o).forEach(function(e){var t=g*e.ndx,i=n.subarray(t,t+g);r.texImage2D(e.face,0,m,f,s,0,l,y,i)})}else u===r.TEXTURE_3D?r.texImage3D(u,0,m,f,s,c,0,l,y,n):r.texImage2D(u,0,m,f,s,0,l,y,n);return a(r,o),{width:f,height:s,depth:c}}function _(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r);var o=t.format||e.RGBA,u=t.internalFormat||o,f=t.type||e.UNSIGNED_BYTE;if(i(e,t),n===e.TEXTURE_CUBE_MAP)for(var s=0;s<6;++s)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,u,t.width,t.height,0,o,f,null);else n===e.TEXTURE_3D?e.texImage3D(n,0,u,t.width,t.height,t.depth,0,o,f,null):e.texImage2D(n,0,u,t.width,t.height,0,o,f,null);a(e,t)}function b(e,r,t){t=t||l,r=r||U.textureOptions;var n=e.createTexture(),i=r.target||e.TEXTURE_2D,a=r.width||1,u=r.height||1;e.bindTexture(i,n),i===e.TEXTURE_CUBE_MAP&&(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var f=r.src;if(f)if("function"==typeof f&&(f=f(e,r)),"string"==typeof f)A(e,n,r,t);else if(P(f)||Array.isArray(f)&&("number"==typeof f[0]||Array.isArray(f[0])||P(f[0]))){var c=h(e,n,f,r);a=c.width,u=c.height}else if(Array.isArray(f)&&"string"==typeof f[0])p(e,n,r,t);else{if(!(f instanceof HTMLElement))throw"unsupported src type";O(e,n,f,r),a=f.width,u=f.height}else _(e,n,r);return r.auto!==!1&&s(e,n,r,a,u),o(e,n,r),n}function g(e,r,t,n,i){n=n||t.width,i=i||t.height;var a=t.target||e.TEXTURE_2D;e.bindTexture(a,r);var o,u=t.format||e.RGBA,f=t.src;if(o=f&&(P(f)||Array.isArray(f)&&"number"==typeof f[0])?t.type||T(e,f):t.type||e.UNSIGNED_BYTE,a===e.TEXTURE_CUBE_MAP)for(var s=0;s<6;++s)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,u,n,i,0,u,o,null);else e.texImage2D(a,0,u,n,i,0,u,o,null)}function R(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}function x(e,r,t){function n(){0===i&&setTimeout(function(){t(a.length?a:void 0,o,u)},0)}t=t||l;var i=0,a=[],o={},u={};return Object.keys(r).forEach(function(t){var f,s=r[t];R(s.src)&&(f=function(e,r,o){u[t]=o,--i,e&&a.push(e),n()},++i),o[t]=b(e,s,f)}),n(),o}var U={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},P=e.isArrayBuffer,w=6406,B=6407,I=6408,F=6409,S=6410,L=function(){function e(e){r||(r={},Object.keys(e).forEach(function(t){"number"==typeof e[t]&&(r[e[t]]=t)}))}var r;return function(t,n){return e(),r[n]||"0x"+n.toString(16)}}(),C={},O=function(){var e=document.createElement("canvas").getContext("2d");return function(r,t,n,u){u=u||U.textureOptions;var f=u.target||r.TEXTURE_2D,c=n.width,l=n.height,m=u.format||r.RGBA,y=u.internalFormat||m,A=u.type||r.UNSIGNED_BYTE;if(i(r,u),r.bindTexture(f,t),f===r.TEXTURE_CUBE_MAP){var p,d,T=n.width,v=n.height;if(T/6===v)p=v,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(v/6===T)p=T,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(T/3===v/2)p=T/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(T/2!==v/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);p=T/2,d=[0,0,1,0,0,1,1,1,0,2,1,2]}e.canvas.width=p,e.canvas.height=p,c=p,l=p,E(r,u).forEach(function(t){var i=d[2*t.ndx+0]*p,a=d[2*t.ndx+1]*p;e.drawImage(n,i,a,p,p,0,0,p,p),r.texImage2D(t.face,0,y,m,A,e.canvas)}),e.canvas.width=1,e.canvas.height=1}else if(f===r.TEXTURE_3D){var h=Math.min(n.width,n.height),_=Math.max(n.width,n.height),b=_/h;if(b%1!==0)throw"can not compute 3D dimensions of element";var g=n.width===_?1:0,R=n.height===_?1:0;r.texImage3D(f,0,y,h,h,h,0,m,A,null),e.canvas.width=h,e.canvas.height=h;for(var x=0;x<b;++x){var P=x*h*g,w=x*h*R,B=h,I=h,F=0,S=0,L=h,C=h;e.drawImage(n,P,w,B,I,F,S,L,C),r.texSubImage3D(f,0,0,0,x,m,A,e.canvas)}e.canvas.width=0,e.canvas.height=0}else r.texImage2D(f,0,y,m,A,n);a(r,u),u.auto!==!1&&s(r,t,u,c,l),o(r,t,u)}}();return{setDefaults_:n,createTexture:b,setEmptyTexture:_,setTextureFromArray:h,loadTextureFromUrl:A,setTextureFromElement:O,setTextureFilteringForSize:s,setTextureParameters:o,setDefaultTextureColor:t,createTextures:x,resizeTexture:g,getNumComponentsForFormat:d}}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i;n=[t(6)],i=function(e){"use strict";function r(r,t,n){var i=r.createVertexArray();return r.bindVertexArray(i),t.length||(t=[t]),t.forEach(function(t){e.setBuffersAndAttributes(r,t,n)}),r.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:i}}function t(r,t,n,i){var a=r.createVertexArray();return r.bindVertexArray(a),e.setAttributes(t,n),i&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i),r.bindVertexArray(null),a}function n(e,r,n){return t(e,r.attribSetters||r,n.attribs,n.indices)}return{createVertexArrayInfo:r,createVAOAndSetAttributes:t,createVAOFromBufferInfo:n}}.apply(r,n),!(void 0!==i&&(e.exports=i))}])});